{\rtf1\ansi\ansicpg1252\cocoartf2757
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!DOCTYPE html>\
<html lang="en">\
<head>\
    <meta charset="UTF-8">\
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\
    <title>Portfolio Dashboard</title>\
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>\
    <script src="https://cdn.tailwindcss.com"></script>\
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">\
    <style>\
        body \{ font-family: 'Lato', sans-serif; \}\
        .heading \{ font-family: 'Playfair Display', serif; \}\
    </style>\
</head>\
<body class="bg-[#FAF8F6] text-[#4A4039] p-8">\
    <div class="max-w-6xl mx-auto">\
        <h1 class="heading text-4xl mb-8">Portfolio Dashboard</h1>\
        \
        <!-- Stats Cards -->\
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">\
            <div class="bg-white p-6 rounded-lg shadow">\
                <h3 class="text-lg font-bold mb-2">Total Flowers</h3>\
                <p id="flowerCount" class="text-3xl font-bold text-[#5a3e30]">Loading...</p>\
            </div>\
            <div class="bg-white p-6 rounded-lg shadow">\
                <h3 class="text-lg font-bold mb-2">Total Feedback</h3>\
                <p id="feedbackCount" class="text-3xl font-bold text-[#5a3e30]">Loading...</p>\
            </div>\
            <div class="bg-white p-6 rounded-lg shadow">\
                <h3 class="text-lg font-bold mb-2">Latest Visit</h3>\
                <p id="latestVisit" class="text-lg text-[#5a3e30]">Loading...</p>\
            </div>\
        </div>\
\
        <!-- Recent Activity -->\
        <div class="bg-white p-6 rounded-lg shadow mb-12">\
            <h2 class="heading text-2xl mb-6">Recent Activity</h2>\
            <div id="recentActivity" class="space-y-4">\
                Loading...\
            </div>\
        </div>\
\
        <!-- Project Feedback -->\
        <div class="bg-white p-6 rounded-lg shadow">\
            <h2 class="heading text-2xl mb-6">Project Feedback</h2>\
            <div id="projectFeedback" class="space-y-4">\
                Loading...\
            </div>\
        </div>\
    </div>\
\
    <script>\
        const supabaseUrl = 'https://hccoowqiswclssmtfbyw.supabase.co'\
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjY29vd3Fpc3djbHNzbXRmYnl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc1Njg1NDQsImV4cCI6MjA2MzE0NDU0NH0.RB-9aB6FwyCUMg98Y6N3rx5w5Te8IvwrwxOx92lpKP0'\
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey)\
\
        async function updateDashboard() \{\
            try \{\
                // Get flower count\
                const \{ data: flowerCount \} = await supabase\
                    .from('flowers')\
                    .select('count');\
                document.getElementById('flowerCount').textContent = flowerCount[0].count;\
\
                // Get feedback count\
                const \{ data: feedbackCount \} = await supabase\
                    .from('feedback')\
                    .select('count');\
                document.getElementById('feedbackCount').textContent = feedbackCount[0].count;\
\
                // Get latest visit\
                const \{ data: latestFlower \} = await supabase\
                    .from('flowers')\
                    .select('created_at, visitor_info')\
                    .order('created_at', \{ ascending: false \})\
                    .limit(1);\
                \
                if (latestFlower && latestFlower[0]) \{\
                    const date = new Date(latestFlower[0].created_at);\
                    document.getElementById('latestVisit').textContent = date.toLocaleString();\
                \}\
\
                // Get recent activity\
                const \{ data: recentActivity \} = await supabase\
                    .from('flowers')\
                    .select('*')\
                    .order('created_at', \{ ascending: false \})\
                    .limit(5);\
\
                const activityHtml = recentActivity.map(activity => `\
                    <div class="border-l-4 border-[#5a3e30] pl-4 py-2">\
                        <p class="text-sm text-gray-600">$\{new Date(activity.created_at).toLocaleString()\}</p>\
                        <p>Visitor from $\{activity.visitor_info.timezone\}</p>\
                    </div>\
                `).join('');\
                document.getElementById('recentActivity').innerHTML = activityHtml;\
\
                // Get project feedback\
                const \{ data: projectFeedback \} = await supabase\
                    .from('feedback')\
                    .select('*')\
                    .order('created_at', \{ ascending: false \});\
\
                const feedbackByProject = \{\};\
                projectFeedback.forEach(feedback => \{\
                    if (!feedbackByProject[feedback.project]) \{\
                        feedbackByProject[feedback.project] = \{ likes: 0, dislikes: 0 \};\
                    \}\
                    if (feedback.is_like) \{\
                        feedbackByProject[feedback.project].likes++;\
                    \} else \{\
                        feedbackByProject[feedback.project].dislikes++;\
                    \}\
                \});\
\
                const feedbackHtml = Object.entries(feedbackByProject).map(([project, stats]) => `\
                    <div class="border-l-4 border-[#687066] pl-4 py-2">\
                        <h3 class="font-bold">$\{project\}</h3>\
                        <div class="flex space-x-4 mt-2">\
                            <span>\uc0\u55357 \u56397  $\{stats.likes\}</span>\
                            <span>\uc0\u55357 \u56398  $\{stats.dislikes\}</span>\
                        </div>\
                    </div>\
                `).join('');\
                document.getElementById('projectFeedback').innerHTML = feedbackHtml;\
\
            \} catch (error) \{\
                console.error('Error updating dashboard:', error);\
            \}\
        \}\
\
        // Update dashboard immediately and every 5 minutes\
        updateDashboard();\
        setInterval(updateDashboard, 300000);\
    </script>\
</body>\
</html>}